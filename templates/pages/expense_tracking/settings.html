{% extends 'layouts/base.html' %}
{% load static %}

{% block title %} - Settings {% endblock title %}

{% block content %}

<div class="page-wrapper mx-md-2">
    <!-- Page header -->
    <div class="page-header d-print-none">
        <div class="container-xl">
            <div class="row g-2 align-items-center">
                <div class="col">
                    <h2 class="page-title">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round"
                            class="icon icon-tabler icons-tabler-outline icon-tabler-settings">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path
                                d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" />
                            <path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" />
                        </svg>
                        Settings
                    </h2>
                </div>
            </div>
        </div>
    </div>
    <!-- Page body -->
    <div class="page-body">
        <div class="container-xl">
            <div class="row row-cards">

                <div class="col-md-15">
                    <div class="card">
                        <div class="card-header">
                            <ul class="nav nav-tabs card-header-tabs" data-bs-toggle="tabs">
                                <li class="nav-item">
                                    <a href="#tabs-home-3" class="nav-link active"
                                        data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/home -->
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="icon icon-tabler icons-tabler-outline icon-tabler-building-bank">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                            <path d="M3 21l18 0" />
                                            <path d="M3 10l18 0" />
                                            <path d="M5 6l7 -3l7 3" />
                                            <path d="M4 10l0 11" />
                                            <path d="M20 10l0 11" />
                                            <path d="M8 14l0 3" />
                                            <path d="M12 14l0 3" />
                                            <path d="M16 14l0 3" />
                                        </svg>
                                        Platform</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#tabs-profile-3" class="nav-link"
                                        data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/user -->
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="icon icon-tabler icons-tabler-outline icon-tabler-golf">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                            <path d="M12 18v-15l7 4l-7 4" />
                                            <path
                                                d="M9 17.67c-.62 .36 -1 .82 -1 1.33c0 1.1 1.8 2 4 2s4 -.9 4 -2c0 -.5 -.38 -.97 -1 -1.33" />
                                        </svg>
                                        Goal/Budget Category</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#tabs-profile-3" class="nav-link"
                                        data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/user -->
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="icon icon-tabler icons-tabler-outline icon-tabler-wallet">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                            <path
                                                d="M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12" />
                                            <path d="M20 12v4h-4a2 2 0 0 1 0 -4h4" />
                                        </svg>
                                        Income Category</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#tabs-profile-3" class="nav-link"
                                        data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/user -->
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="icon icon-tabler icons-tabler-outline icon-tabler-wallet-off">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                            <path
                                                d="M17 8v-3a1 1 0 0 0 -1 -1h-8m-3.413 .584a2 2 0 0 0 1.413 3.416h2m4 0h6a1 1 0 0 1 1 1v3" />
                                            <path d="M19 19a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12" />
                                            <path d="M16 12h4v4m-4 0a2 2 0 0 1 -2 -2" />
                                            <path d="M3 3l18 18" />
                                        </svg>
                                        Expense Category</a>
                                </li>
                                <li class="nav-item">
                                    <a href="#tabs-profile-3" class="nav-link"
                                        data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/user -->
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="icon icon-tabler icons-tabler-outline icon-tabler-pig-money">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                            <path d="M15 11v.01" />
                                            <path d="M5.173 8.378a3 3 0 1 1 4.656 -1.377" />
                                            <path
                                                d="M16 4v3.803a6.019 6.019 0 0 1 2.658 3.197h1.341a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-1.342c-.336 .95 -.907 1.8 -1.658 2.473v2.027a1.5 1.5 0 0 1 -3 0v-.583a6.04 6.04 0 0 1 -1 .083h-4a6.04 6.04 0 0 1 -1 -.083v.583a1.5 1.5 0 0 1 -3 0v-2l0 -.027a6 6 0 0 1 4 -10.473h2.5l4.5 -3h0z" />
                                        </svg>
                                        Saving Category</a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content">
                                <div class="tab-pane active show" id="tabs-home-3">
                                    <h4>Home tab</h4>
                                    <div>Cursus turpis vestibulum, dui in pharetra vulputate id sed non turpis ultricies
                                        fringilla at sed facilisis lacus pellentesque purus nibh</div>
                                        <p><button id="addRow">Add new row</button></p>
                                        <table id="myExampleTable" class="table" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Name</th>
                                                    <th>Description</th>
                                                    <th>Enabled</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for platform in platforms %}
                                                <tr>
                                                    <td>{{ platform.id }}</td>
                                                    <td>{{ platform.name }}</td>
                                                    <td>{{ platform.description }}</td>
                                                    <td>{{ platform.enable }}</td>
                                                    <td class="editable-actions">
                                                        <button class="btn btn-success save-btn">Save</button>
                                                        <button class="btn btn-danger cancel-btn">Cancel</button>
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Name</th>
                                                    <th>Description</th>
                                                    <th>Enabled</th>
                                                    <th>Action</th>
                                                </tr>
                                            </tfoot>
                                        </table>   
                                </div>
                                <div class="tab-pane" id="tabs-profile-3">
                                    <h4>Profile tab</h4>
                                    <div>Fringilla egestas nunc quis tellus diam rhoncus ultricies tristique enim at
                                        diam, sem nunc amet, pellentesque id egestas velit sed</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<!--     {% include 'includes/footer.html' %} -->
</div>

{% endblock content %}

{% block extrajs %}
<script>
    $(document).ready(function () {
        const table = $('#myExampleTable').DataTable({
            "paging": false,
            "info": false,
            "searching": false
        });

        $('#addRow').on('click', function () {
            addNewRow();
        });

        let counter = {{ platforms|length }} + 1;

        function addNewRow() {
            var newRow = [
                counter + '.1',
                '', // Name (initially empty)
                '', // Description (initially empty)
                'false', // Enabled (initially unchecked)
                '<button class="btn btn-success save-btn">Save</button><button class="btn btn-danger cancel-btn">Cancel</button>'
            ];
            var newRowElement = table.row.add(newRow).draw(false).node();

            $(newRowElement).addClass('new-row');
            $(newRowElement).find('.editable-actions button').show(); // Show buttons for new row

            counter++;
        }

        $('#myExampleTable tbody').on('click', '.editable-actions button.save-btn', function () {
            var row = $(this).closest('tr');
            var rowData = table.row(row).data();

            // Handle save logic here (send data to backend, update UI, etc.)
            console.log('Saving row:', rowData);

            row.removeClass('new-row');
            row.find('.editable-actions button').hide(); // Hide buttons after save
        });

        $('#myExampleTable tbody').on('click', '.editable-actions button.cancel-btn', function () {
            var row = $(this).closest('tr');

            // Discard changes and remove the row
            table.row(row).remove().draw();
        });
    });
</script>
{% endblock extrajs %}